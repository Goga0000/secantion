(async()=>{let e=new Map,t=0,a=!1,n=[],r=async()=>{try{let e=await fetch("https://api.github.com/repos/Goga0000/secantion/contents/one?ref=main"),a=await e.json();return t=(n=a.map(e=>e.download_url)).length,console.log(`üìÅ ${t} —Ñ–∞–π–ª–æ–≤`),!0}catch(r){return console.error("‚ùå API:",r),!1}},i=async()=>{if(!a&&await r()){console.log("\uD83D\uDD04 –ó–∞–≥—Ä—É–∂–∞–µ–º...");for(let i=0;i<t;i++)try{let s=await fetch(n[i]),l=await s.blob(),o=new Image;o.src=URL.createObjectURL(l),await new Promise((e,t)=>{o.onload=()=>e(o),o.onerror=t}),e.set(i,o),i%50==0&&console.log(`üìà ${i}/${t}`)}catch(c){}a=!0,console.log(`üéâ ${e.size} —Ñ–∞–π–ª–æ–≤!`)}};i(),setInterval(()=>{if(!a||0===e.size)return;let t=document.querySelector(".t-slds__items-wrapper");if(!t)return;let n=t.querySelectorAll(".t-slds__item");if(n.length<2)return;let r=n[n.length-2];if(r?.classList.contains("video-replaced"))return;let i=r.querySelector(".t-null__slds-wrapper");if(!i)return;console.log("‚ö° Video360: –∑–∞–º–µ–Ω–∞!"),r.classList.add("video-replaced"),i.innerHTML=`
      <div class="video360-container">
        <canvas id="vid360-canvas"></canvas>
      </div>
    `;let s=document.getElementById("vid360-canvas"),l=s.getContext("2d"),o=i.querySelector(".video360-container"),c=()=>{s.width=1024,s.height=1024,l.resetTransform(),console.log(`üñºÔ∏è –ö–≤–∞–¥—Ä–∞—Ç 1:1: 1024x1024`)},d=t=>{let a=e.get(t%e.size);if(!a)return;l.clearRect(0,0,1024,1024);let n=a.naturalWidth/a.naturalHeight,r,i,s=0,o=0;n>1?(i=1024,s=-((r=1024*n)-1024)/2):(r=1024,o=-((i=1024/n)-1024)/2),l.drawImage(a,s,o,r,i)};c(),d(0);let $=!1,u=0,g=0;s.addEventListener("mousedown",e=>{$=!0,u=e.clientX,o.classList.add("dragging"),e.preventDefault()}),document.addEventListener("mousemove",t=>{if($){let a=t.clientX-u;g+=.05*a,u=t.clientX,d(Math.floor(g)%e.size)}}),document.addEventListener("mouseup",()=>{$=!1,o.classList.remove("dragging")}),s.addEventListener("touchstart",e=>{$=!0,u=e.touches[0].clientX,o.classList.add("dragging"),e.preventDefault()},{passive:!1}),document.addEventListener("touchmove",t=>{if($&&t.touches[0]){let a=t.touches[0].clientX-u;g+=.05*a,u=t.touches[0].clientX,d(Math.floor(g)%e.size),t.preventDefault()}},{passive:!1}),document.addEventListener("touchend",()=>{$=!1,o.classList.remove("dragging")}),console.log("\uD83D\uDE80 ‚úÖ 1:1 –∫–≤–∞–¥—Ä–∞—Ç + CSS —Ä–∞—Å—Ç—è–∂–∫–∞!")},500)})();
