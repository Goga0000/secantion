(async()=>{let e=new Map,t=0,i=!1,n=[],a=async()=>{try{let e=await fetch("https://api.github.com/repos/Goga0000/secantion/contents/one?ref=main"),i=await e.json();return t=(n=i.map(e=>e.download_url)).length,console.log(`ðŸ“ ${t} Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾`),!0}catch(a){return console.error("âŒ API:",a),!1}},r=async()=>{if(!i&&await a()){console.log("\uD83D\uDD04 Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð’Ð¡Ð• 458 Ñ„Ð°Ð¹Ð»Ð¾Ð²...");for(let r=0;r<t;r++)try{console.time(`Ð¤Ð°Ð¹Ð» ${r+1}`);let s=await fetch(n[r]),l=await s.blob(),o=new Image;o.src=URL.createObjectURL(l),await new Promise((e,t)=>{o.onload=()=>e(o),o.onerror=t}),e.set(r,o),console.timeEnd(`Ð¤Ð°Ð¹Ð» ${r+1}`),(r%50==0||r===t-1)&&console.log(`ðŸ“ˆ ${r+1}/${t} (${Math.round((r+1)/t*100)}%)`)}catch(d){console.warn(`âš ï¸ Ð¤Ð°Ð¹Ð» ${r+1} Ð¿Ñ€Ð¾Ð¿ÑƒÑ‰ÐµÐ½`)}i=!0,console.log(`ðŸŽ‰ âœ… Ð’Ð¡Ð• ${e.size}/${t} Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸!`)}};r(),setInterval(()=>{if(!i||0===e.size)return;let t=document.querySelector(".t-slds__items-wrapper");if(!t)return;let n=t.querySelectorAll(".t-slds__item");if(n.length<2)return;let a=n[n.length-2];if(a?.classList.contains("video-replaced"))return;let r=a.querySelector(".t-null__slds-wrapper");if(!r)return;console.log("âš¡ Video360: Ð·Ð°Ð¼ÐµÐ½Ð° ÑÐ»Ð°Ð¹Ð´Ð°!"),a.classList.add("video-replaced"),r.innerHTML=`
      <div class="video360-container">
        <canvas id="vid360-canvas"></canvas>
      </div>
    `;let s=document.getElementById("vid360-canvas"),l=s.getContext("2d"),o=r.querySelector(".video360-container"),d=()=>{let e=o.getBoundingClientRect(),t=window.devicePixelRatio||1;s.width=e.width*t,s.height=e.height*t,s.style.width=e.width+"px",s.style.height=e.height+"px",l.setTransform(t,0,0,t,0,0)},c=t=>{let i=e.get(t%e.size);if(!i)return;let n=o.getBoundingClientRect();l.clearRect(0,0,n.width,n.height),l.drawImage(i,0,0,n.width,n.height)};d(),c(0);let $=!1,g=0,h=0;s.addEventListener("mousedown",e=>{$=!0,g=e.clientX,o.classList.add("dragging"),e.preventDefault()}),document.addEventListener("mousemove",t=>{if($){let i=t.clientX-g;h+=.05*i,g=t.clientX;let n=Math.floor(h)%e.size;c(n)}}),document.addEventListener("mouseup",()=>{$=!1,o.classList.remove("dragging")}),s.addEventListener("touchstart",e=>{$=!0,g=e.touches[0].clientX,o.classList.add("dragging"),e.preventDefault()},{passive:!1}),document.addEventListener("touchmove",t=>{if($&&t.touches[0]){let i=t.touches[0].clientX-g;h+=.05*i,g=t.touches[0].clientX;let n=Math.floor(h)%e.size;c(n),t.preventDefault()}},{passive:!1}),document.addEventListener("touchend",()=>{$=!1,o.classList.remove("dragging")}),console.log("\uD83D\uDE80 Video360: âœ… Ð’Ð¡Ð• 458 Ñ„Ð°Ð¹Ð»Ð¾Ð²!")},500)})();
