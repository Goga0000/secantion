(async()=>{let e=new Map,t=0,a=!1,r=[],n=async()=>{try{let e=await fetch("https://api.github.com/repos/Goga0000/secantion/contents/one?ref=main"),a=await e.json();return t=(r=a.map(e=>e.download_url)).length,console.log(`ðŸ“ ${t} Ñ„Ð°Ð¹Ð»Ð¾Ð²`),!0}catch(n){return console.error("âŒ API:",n),!1}},i=async()=>{if(!a&&await n()){console.log("\uD83D\uDD04 Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼...");for(let i=0;i<t;i++)try{let s=await fetch(r[i]),l=await s.blob(),$=new Image;$.src=URL.createObjectURL(l),await new Promise((e,t)=>{$.onload=()=>e($),$.onerror=t}),e.set(i,$),i%50==0&&console.log(`ðŸ“ˆ ${i}/${t}`)}catch(o){}a=!0,console.log(`ðŸŽ‰ ${e.size} Ñ„Ð°Ð¹Ð»Ð¾Ð²!`)}};i(),setInterval(()=>{if(!a||0===e.size)return;let t=document.querySelector(".t-slds__items-wrapper");if(!t)return;let r=t.querySelectorAll(".t-slds__item");if(r.length<2)return;let n=r[r.length-2];if(n?.classList.contains("video-replaced"))return;let i=n.querySelector(".t-null__slds-wrapper");if(!i)return;console.log("âš¡ Video360: Ð·Ð°Ð¼ÐµÐ½Ð°!"),n.classList.add("video-replaced"),i.innerHTML=`
      <div class="video360-container">
        <canvas id="vid360-canvas"></canvas>
      </div>
    `;let s=document.getElementById("vid360-canvas"),l=s.getContext("2d"),$=i.querySelector(".video360-container"),o=()=>{s.width=1200,s.height=1200,l.resetTransform(),console.log(`ðŸ–¼ï¸ 1:1 Render: 1200x1200`)},c=t=>{let a=e.get(t%e.size);if(!a)return;l.clearRect(0,0,1200,1200);let r=a.naturalWidth/a.naturalHeight,n,i,s,$;r>1?(i=1200,s=-((n=1200*r)-1200)/2,$=0):(n=1200,s=0,$=-((i=1200/r)-1200)/2),l.drawImage(a,s,$,n,i)};o(),c(0);let d=!1,u=0,g=0;s.addEventListener("mousedown",e=>{d=!0,u=e.clientX,$.classList.add("dragging"),e.preventDefault()}),document.addEventListener("mousemove",t=>{if(d){let a=t.clientX-u;g+=.05*a,u=t.clientX,c(Math.floor(g)%e.size)}}),document.addEventListener("mouseup",()=>{d=!1,$.classList.remove("dragging")}),s.addEventListener("touchstart",e=>{d=!0,u=e.touches[0].clientX,$.classList.add("dragging"),e.preventDefault()},{passive:!1}),document.addEventListener("touchmove",t=>{if(d&&t.touches[0]){let a=t.touches[0].clientX-u;g+=.05*a,u=t.touches[0].clientX,c(Math.floor(g)%e.size),t.preventDefault()}},{passive:!1}),document.addEventListener("touchend",()=>{d=!1,$.classList.remove("dragging")}),console.log("\uD83D\uDE80 âœ… 1:1 render + CSS scale!")},500)})();
