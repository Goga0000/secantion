(async()=>{let e=new Map,t=0,a=!1,i=[],n=async()=>{try{let e=await fetch("https://api.github.com/repos/Goga0000/secantion/contents/one?ref=main"),a=await e.json();return t=(i=a.map(e=>e.download_url)).length,console.log(`ðŸ“ ${t} Ñ„Ð°Ð¹Ð»Ð¾Ð²`),!0}catch(n){return console.error("âŒ API:",n),!1}},r=async()=>{if(a||!await n())return;console.log("\uD83D\uDD04 Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...");let t=i.slice(0,50).map(async(t,a)=>{try{let i=await fetch(t),n=await i.blob(),r=new Image;r.src=URL.createObjectURL(n),await new Promise((e,t)=>{r.onload=()=>e(r),r.onerror=t}),e.set(a,r)}catch(s){}});await Promise.allSettled(t),a=!0,console.log(`ðŸŽ‰ ${e.size} Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹!`)};r(),setInterval(()=>{if(!a||0===e.size)return;let t=document.querySelector(".t-slds__items-wrapper");if(!t)return;let i=t.querySelectorAll(".t-slds__item");if(i.length<2)return;let n=i[i.length-2];if(n?.classList.contains("video-replaced"))return;let r=n.querySelector(".t-null__slds-wrapper");if(!r)return;console.log("âš¡ Video360: Ð·Ð°Ð¼ÐµÐ½Ð°!"),n.classList.add("video-replaced"),r.innerHTML=`
      <div class="video360-container">
        <canvas id="vid360-canvas"></canvas>
      </div>
    `;let s=document.getElementById("vid360-canvas"),l=s.getContext("2d"),o=r.querySelector(".video360-container"),d=()=>{let e=o.getBoundingClientRect(),t=window.devicePixelRatio||1;s.width=e.width*t,s.height=e.height*t,l.scale(t,t)},c=t=>{let a=e.get(t%e.size);if(!a)return;let i=o.getBoundingClientRect();l.clearRect(0,0,i.width,i.height),l.drawImage(a,0,0,i.width,i.height)};d(),c(0);let g=!1,$=0;s.addEventListener("mousedown",e=>{g=!0,$=0,o.classList.add("dragging"),e.preventDefault()}),document.addEventListener("mousemove",t=>{if(g){$+=.1*(t.movementX||0);let a=Math.floor($)%e.size;c(a)}}),document.addEventListener("mouseup",()=>{g=!1,o.classList.remove("dragging")}),s.addEventListener("touchstart",e=>{g=!0,$=0,o.classList.add("dragging"),e.preventDefault()},{passive:!1}),document.addEventListener("touchmove",t=>{if(g&&t.touches[0]){$+=.1*t.touches[0].movementX;let a=Math.floor($)%e.size;c(a),t.preventDefault()}},{passive:!1}),document.addEventListener("touchend",()=>{g=!1,o.classList.remove("dragging")}),console.log("\uD83D\uDE80 Video360 Ð³Ð¾Ñ‚Ð¾Ð²!")},500)})();
