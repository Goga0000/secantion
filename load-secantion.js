(async()=>{let e=new Map,t=0,i=!1,n=[],a=async()=>{try{let e=await fetch("https://api.github.com/repos/Goga0000/secantion/contents/one?ref=main"),i=await e.json();return t=(n=i.map(e=>e.download_url)).length,console.log(`üìÅ ${t} —Ñ–∞–π–ª–æ–≤`),!0}catch(a){return console.error("‚ùå API:",a),!1}},l=async()=>{if(i||!await a())return;console.log("\uD83D\uDD04 –ó–∞–≥—Ä—É–∑–∫–∞...");let t=n.slice(0,50).map(async(t,i)=>{try{let n=await fetch(t),a=await n.blob(),l=new Image;l.src=URL.createObjectURL(a),await new Promise((e,t)=>{l.onload=()=>e(l),l.onerror=t}),e.set(i,l)}catch(r){}});await Promise.allSettled(t),i=!0,console.log(`üéâ ${e.size} —Ñ–∞–π–ª–æ–≤ –≥–æ—Ç–æ–≤—ã!`)};l(),setInterval(()=>{if(!i||0===e.size)return;let t=document.querySelector(".t-slds__items-wrapper");if(!t)return;let n=t.querySelectorAll(".t-slds__item");if(n.length<2)return;let a=n[n.length-2];if(a?.classList.contains("video-replaced"))return;let l=a.querySelector(".t-null__slds-wrapper");if(!l)return;console.log("‚ö° Video360: –∑–∞–º–µ–Ω–∞!"),a.classList.add("video-replaced"),l.innerHTML=`
      <div class="video360-container">
        <canvas id="vid360-canvas"></canvas>
      </div>
    `;let r=document.getElementById("vid360-canvas"),s=r.getContext("2d"),d=l.querySelector(".video360-container"),o=()=>{let e=d.getBoundingClientRect(),t=window.devicePixelRatio||1;r.width=e.width*t,r.height=e.height*t,r.style.width=e.width+"px",r.style.height=e.height+"px",s.setTransform(t,0,0,t,0,0),console.log(`üìê ${e.width.toFixed(0)}x${e.height.toFixed(0)} DPR:${t}`)},c=t=>{let i=e.get(t%e.size);if(!i)return;let n=d.getBoundingClientRect();s.clearRect(0,0,n.width,n.height),s.drawImage(i,0,0,n.width,n.height)};o(),c(0);let $=!1,g=0,h=0;r.addEventListener("mousedown",e=>{$=!0,g=e.clientX,d.classList.add("dragging"),e.preventDefault()}),document.addEventListener("mousemove",t=>{if($){let i=t.clientX-g;h+=.05*i,g=t.clientX;let n=Math.floor(h)%e.size;c(n)}}),document.addEventListener("mouseup",()=>{$=!1,d.classList.remove("dragging")}),r.addEventListener("touchstart",e=>{$=!0,g=e.touches[0].clientX,d.classList.add("dragging"),e.preventDefault()},{passive:!1}),document.addEventListener("touchmove",t=>{if($&&t.touches[0]){let i=t.touches[0].clientX-g;h+=.05*i,g=t.touches[0].clientX;let n=Math.floor(h)%e.size;c(n),t.preventDefault()}},{passive:!1}),document.addEventListener("touchend",()=>{$=!1,d.classList.remove("dragging")}),console.log("\uD83D\uDE80 Video360: ‚úÖ –§–∏–∫—Å —á–µ—Ä–Ω—ã–µ –ø–æ–ª—è + –ø–ª–∞–≤–Ω—ã–π drag!")},500)})();
