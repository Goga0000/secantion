(async()=>{let e=new Map,t=0,r=0,l=null,s=null,n=!1,a=0,i=()=>{let e=[];for(let r=8e3;r<=8457;r++){let l=r.toString().padStart(3,"0");e.push(`https://souzmult.ru/secantion/one/Untitled00108${l}.webp`)}return $=e,t=e.length,console.log(`ðŸš€ Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ ${t} Ñ„Ð°Ð¹Ð»Ð¾Ð² (8000-8457)`),!0},$=[],o=async r=>{let l=0;for(let s=0;s<t;s+=r){let n=s%t;if(!e.has(n)){let a=new Image;a.crossOrigin="anonymous",a.src=$[n],await new Promise(t=>{a.onload=()=>{e.set(n,a),l++,t()},a.onerror=a.onabort=()=>t()})}}console.log(`âœ… ÐšÑÑˆ: ${e.size}/${t}`)},d=r=>{if(0===e.size||null===s)return;let l=Math.floor((targetFrame+t)%t),n=e.get(l);if(!n)for(let a=1;a<=10;a++){let i=(l-a+t)%t,$=(l+a)%t;if(n=e.get(i)||e.get($))break}if(!n)for(let o of e.values()){n=o;break}if(n){s.save(),s.clearRect(0,0,1024,1024);let d=n.naturalWidth/n.naturalHeight,u,c,v=0,_=0;d>1?(u=1024,_=(1024-(c=1024/d))/2):(c=1024,v=(1024-(u=1024*d))/2),s.drawImage(n,v,_,u,c),s.restore()}},u=e=>{if(!(l=e.querySelector("#vid360-canvas")))return;l.width=l.height=1024,s=l.getContext("2d");let t=e=>{n=!0,a=e.clientX||e.touches?.[0]?.clientX||0,l.style.cursor="grabbing",e.preventDefault()},i=e=>{if(!n)return;let t=e.clientX||e.touches?.[0]?.clientX||0;d(r+=(t-a)*.2),a=t,e.preventDefault()},$=()=>{n=!1,l.style.cursor="grab"};l.addEventListener("mousedown",t,{passive:!1}),l.addEventListener("mousemove",i,{passive:!1}),document.addEventListener("mouseup",$),l.addEventListener("touchstart",t,{passive:!1}),l.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",$),d(0)};setInterval(()=>{let e=document.querySelector(".t-slds__items-wrapper");if(!e)return;let t=e.querySelectorAll(".t-slds__item");if(t.length<2)return;let r=t[t.length-2];if(r.classList.contains("video-replaced"))return;let l=r.querySelector(".t-null__slds-wrapper");l&&(r.classList.add("video-replaced"),l.innerHTML=`
      <div style="position:relative;width:100%;height:100%;overflow:hidden;">
        <canvas id="vid360-canvas" style="width:100%;height:100%;display:block;cursor:grab;"></canvas>
      </div>
    `,u(l))},500),setTimeout(()=>{document.querySelectorAll('input[type="password"]').forEach(e=>e.autocomplete="new-password")},1e3),(async()=>{i(),await o(25),setTimeout(()=>o(12),200),setTimeout(()=>o(6),700),setTimeout(()=>o(2),1600),setTimeout(()=>o(1),3200)})()})();
