(async()=>{let e=new Map,t=0,a=!1,l=[],n=0,i=async()=>{try{let e=await fetch("https://api.github.com/repos/Goga0000/secantion/contents/one?ref=main"),a=await e.json();return t=(l=a.map(e=>e.download_url)).length,console.log(`üìÅ ${t} —Ñ–∞–π–ª–æ–≤ –≤—Å–µ–≥–æ`),!0}catch(n){return console.error("‚ùå API:",n),!1}},r=async()=>{await i()&&(console.log("\uD83D\uDE80 –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞..."),await s(25),a=!0,console.log("‚úÖ –ü–ê–ö–ï–¢ 1 –≥–æ—Ç–æ–≤! Video360 —Å—Ç–∞—Ä—Ç—É–µ—Ç..."),setTimeout(()=>s(12),100),setTimeout(()=>s(6),500),setTimeout(()=>s(1),2e3))},s=async a=>{console.log(`üì¶ –ü–ê–ö–ï–¢ —à–∞–≥=${a}...`);for(let n=0;n<t;n+=a){let i=n%t;if(!e.has(i))try{let r=await fetch(l[i]),s=await r.blob(),$=new Image;$.src=URL.createObjectURL(s),await new Promise((e,t)=>{$.onload=()=>e($),$.onerror=t}),e.set(i,$)}catch(o){console.warn(`‚ö†Ô∏è –ö–∞–¥—Ä ${i}`)}}console.log(`‚úÖ –ü–ê–ö–ï–¢ —à–∞–≥=${a} –∑–∞–≤–µ—Ä—à—ë–Ω! –ö—ç—à: ${e.size}/${t}`)};r(),setInterval(()=>{if(!a||0===e.size)return;let l=document.querySelector(".t-slds__items-wrapper");if(!l)return;let i=l.querySelectorAll(".t-slds__item");if(i.length<2)return;let r=i[i.length-2];if(r?.classList.contains("video-replaced"))return;let s=r.querySelector(".t-null__slds-wrapper");if(!s)return;console.log("‚ö° Video360: –∑–∞–º–µ–Ω–∞!"),r.classList.add("video-replaced"),s.innerHTML=`
      <div class="video360-container">
        <canvas id="vid360-canvas"></canvas>
      </div>
    `;let $=document.getElementById("vid360-canvas"),o=$.getContext("2d"),c=s.querySelector(".video360-container"),d=()=>{$.width=1024,$.height=1024,o.resetTransform()},g=a=>{let l=Math.floor((a+t)%t),n=e.get(l);if(!n){for(let i=0;i<t;i++){let r=(l+i)%t;if(e.has(r)){o.clearRect(0,0,1024,1024),o.fillStyle="#ccc",o.fillRect(0,0,1024,1024),o.fillStyle="white",o.font="48px Arial",o.textAlign="center",o.fillText(`Loading... ${e.size}/${t}`,512,512);break}}return}o.clearRect(0,0,1024,1024);let s=n.naturalWidth/n.naturalHeight,$,c,d=0,g=0;s>1?(c=1024,d=-(($=1024*s)-1024)/2):($=1024,g=-((c=1024/s)-1024)/2),o.drawImage(n,d,g,$,c)};d(),g(n);let u=!1,_=0;$.addEventListener("mousedown",e=>{u=!0,_=e.clientX,c.classList.add("dragging"),e.preventDefault()}),document.addEventListener("mousemove",e=>{if(u){let t=e.clientX-_;n+=.05*t,_=e.clientX,g(n)}}),document.addEventListener("mouseup",()=>{u=!1,c.classList.remove("dragging")}),$.addEventListener("touchstart",e=>{u=!0,_=e.touches[0].clientX,c.classList.add("dragging"),e.preventDefault()},{passive:!1}),document.addEventListener("touchmove",e=>{if(u&&e.touches[0]){let t=e.touches[0].clientX-_;n+=.05*t,_=e.touches[0].clientX,g(n),e.preventDefault()}},{passive:!1}),document.addEventListener("touchend",()=>{u=!1,c.classList.remove("dragging")}),console.log("\uD83D\uDE80 ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ + –ø–æ–∑–∏—Ü–∏—è!")},500)})();
